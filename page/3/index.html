<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/3/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale">
<meta property="article:author" content="zman">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-wordpress/spring-package-for-different-stage" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/05/wordpress/spring-package-for-different-stage/" class="article-date">
  <time datetime="2016-05-05T14:01:08.000Z" itemprop="datePublished">2016-05-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Spring/">Spring</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/05/wordpress/spring-package-for-different-stage/">Maven项目不同环境打包不同配置</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>同一项目在开发、测试、线上环境下分别使用不同配置，如何打包</em> 基于项目<a target="_blank" rel="noopener" href="https://www.zmannotes.com/index.php/2016/04/16/spring-basic-web/">Spring Web</a>进行开发，支持为不同环境打包功能 <strong>1. 创建文件夹src/main/config</strong> <strong>2. 创建测试环境配置文件test.properties，内容如下</strong></p>
<p>env=test</p>
<p><strong>3. 创建线上环境配置文件prod.properties，内容如下</strong></p>
<p>env=prod</p>
<p><strong>4. 修改pom.xml文件，添加如下内容</strong></p>
<profiles>
    <profile>
        <id>test</id>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-antrun-plugin</artifactId>
                    <version>1.7</version>
                    <executions>
                        <execution>
                            <phase>compile</phase>
                            <goals>
                                <goal>run</goal>
                            </goals>
                            <configuration>
                                <target>
                                    <echo message="copy test.properties to ${project.build.directory}/classes/"/>
                                    <copy file="src/main/config/test.properties"
                                          tofile="${project.build.directory}/classes/application.properties"
                                          overwrite="true"/>
                                </target>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>
            </plugins>
        </build>
    </profile>
    <profile>
        <id>prod</id>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-antrun-plugin</artifactId>
                    <version>1.7</version>
                    <executions>
                        <execution>
                            <phase>compile</phase>
                            <goals>
                                <goal>run</goal>
                            </goals>
                            <configuration>
                                <target name="prod-copying">
                                    <echo message="copy  prod.properties to /classes/"/>
                                    <copy file="src/main/config/prod.properties"
                                          tofile="${project.build.directory}/classes/application.properties"
                                          overwrite="true"/>
                                </target>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>
            </plugins>
        </build>
    </profile>
</profiles>

<p><strong>5. 分别为开发、测试、线上环境打包</strong> 5.1 为开发环境打包 <code>mvn clean package</code> 5.2 为测试环境打包 <code>mvn clean package -Ptest</code> 5.3 为线上环境打包 <code>mvn clean package -Pprod</code> <a target="_blank" rel="noopener" href="https://github.com/zman2013/spring-multiple-config">源码Github</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2016/05/05/wordpress/spring-package-for-different-stage/" data-id="ckhoznqst0022wpnien884caf" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%B8%8D%E5%90%8C%E7%8E%AF%E5%A2%83%E6%89%93%E5%8C%85/" rel="tag">不同环境打包</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%A4%9A%E9%85%8D%E7%BD%AE/" rel="tag">多配置</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-wordpress/mybatis-generator" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/05/wordpress/mybatis-generator/" class="article-date">
  <time datetime="2016-05-05T13:31:10.000Z" itemprop="datePublished">2016-05-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/code-generator/">code generator</a>►<a class="article-category-link" href="/categories/mybatis/">mybatis</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/05/wordpress/mybatis-generator/">Mybatis Generator</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>代码生成器 自动生成mybatis代码、配置文件</em> <strong>1. 定义规则文件</strong></p>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE generatorConfiguration
  PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"
  "http://mybatis.org/dtd/mybatis-generator-config\_1\_0.dtd">

<generatorConfiguration>
    <!-- 声明jdbc位置-->
    <classPathEntry
        location="/Users/{用户名}/.m2/repository/mysql/mysql-connector-java/5.1.37/mysql-connector-java-5.1.37.jar" />

<pre><code>&lt;context id=&quot;DB2Tables&quot; targetRuntime=&quot;MyBatis3&quot;&gt;
    &lt;!-- 数据库地址、用户名密码 --&gt;
    &lt;jdbcConnection driverClass=&quot;com.mysql.jdbc.Driver&quot;
        connectionURL=&quot;jdbc:mysql://xxx:2301/stock&quot; userId=&quot;msandbox&quot;
        password=&quot;msandbox&quot;&gt;
    &lt;/jdbcConnection&gt;

    &lt;javaTypeResolver&gt;
        &lt;property name=&quot;forceBigDecimals&quot; value=&quot;false&quot; /&gt;
    &lt;/javaTypeResolver&gt;

    &lt;!-- 定义domain类路径 --&gt;
    &lt;javaModelGenerator targetPackage=&quot;com.zmannotes.spring.mybatis.domain&quot;
        targetProject=&quot;src/main/java&quot;&gt;
        &lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot; /&gt;
        &lt;property name=&quot;trimStrings&quot; value=&quot;true&quot; /&gt;
    &lt;/javaModelGenerator&gt;

    &lt;!-- 定义XXXMapper文件路径 --&gt;
    &lt;sqlMapGenerator targetPackage=&quot;mybatis/stock&quot;
        targetProject=&quot;src/main/resources&quot;&gt;
        &lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot; /&gt;
    &lt;/sqlMapGenerator&gt;

    &lt;!-- 定义dao类的路径 --&gt;
    &lt;javaClientGenerator type=&quot;XMLMAPPER&quot;
        targetPackage=&quot;com.zmannotes.spring.mybatis.dao&quot; targetProject=&quot;src/main/java&quot;&gt;
        &lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot; /&gt;
    &lt;/javaClientGenerator&gt;

    &lt;!-- 指明表名stock --&gt;
    &lt;table schema=&quot;&quot; tableName=&quot;stock&quot; domainObjectName=&quot;Stock&quot;
        enableCountByExample=&quot;false&quot; enableUpdateByExample=&quot;false&quot;
        enableDeleteByExample=&quot;false&quot; enableSelectByExample=&quot;false&quot;
        selectByExampleQueryId=&quot;false&quot; /&gt;
    &lt;!-- 指明表名stock\_detail （同一个文件中可以指定多个表） --&gt;
    &lt;table schema=&quot;&quot; tableName=&quot;stock\_detail&quot; domainObjectName=&quot;StockDetail&quot;
        enableCountByExample=&quot;false&quot; enableUpdateByExample=&quot;false&quot;
        enableDeleteByExample=&quot;false&quot; enableSelectByExample=&quot;false&quot;
        selectByExampleQueryId=&quot;false&quot; /&gt;


&lt;/context&gt;</code></pre>
</generatorConfiguration>

<p><strong>2. 修改pom文件</strong></p>
<build>

<pre><code>&lt;plugins&gt;
    &lt;plugin&gt;
        &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt;
        &lt;artifactId&gt;mybatis-generator-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;1.3.2&lt;/version&gt;
        &lt;configuration&gt;
            &lt;verbose&gt;true&lt;/verbose&gt;
            &lt;overwrite&gt;true&lt;/overwrite&gt;
        &lt;/configuration&gt;
    &lt;/plugin&gt;
&lt;/plugins&gt;</code></pre>
</build>

<p> <strong>3. 生成代码</strong></p>
<p>$ mvn mybatis-generator:generate</p>
<p>结果如下图（Stock、StockMapper、StockMapper.xml均自动生成，且包含基本访问数据的接口） <a target="_blank" rel="noopener" href="https://www.zmannotes.com/wp-content/uploads/2016/05/mybatis-generator.jpg"><img src="https://www.zmannotes.com/wp-content/uploads/2016/05/mybatis-generator.jpg" alt="mybatis-generator"></a> 增删改查基本操作，自动生成的代码已经满足。如果我们需要更多自定义的方法，可以直接基于初始代码进行修改。 <a target="_blank" rel="noopener" href="http://www.mybatis.org/generator/index.html">Mybatis Generator 官网</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2016/05/05/wordpress/mybatis-generator/" data-id="ckhoznqs3000xwpnihzjf1jd7" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mybatis%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8/" rel="tag">mybatis代码生成器</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-wordpress/spring-mybatis" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/04/wordpress/spring-mybatis/" class="article-date">
  <time datetime="2016-05-04T14:34:05.000Z" itemprop="datePublished">2016-05-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Spring/">Spring</a>►<a class="article-category-link" href="/categories/mybatis/">mybatis</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/04/wordpress/spring-mybatis/">Spring+Mybatis</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>基于之前的spring项目，引入mybatis作为数据层基本框架</em> <strong>1. 引入mybatis依赖</strong></p>
<properties>
    <mybatis.version>3.3.0</mybatis.version>
    <mybatis-spring.version>1.2.3</mybatis-spring.version>
</properties>

<!-- mybatis -->
<dependency>
    <groupId>org.mybatis</groupId>
    <artifactId>mybatis-spring</artifactId>
    <version>${mybatis-spring.version}</version>
</dependency>
<dependency>
    <groupId>org.mybatis</groupId>
    <artifactId>mybatis</artifactId>
    <version>${mybatis.version}</version>
</dependency>

<p> <strong>2. 创建Domain类</strong> 2.1 表结构</p>
<p>CREATE TABLE `stock` (<br>  `code` varchar(10) NOT NULL,<br>  `name` varchar(10) NOT NULL,<br>  `count` int(11) DEFAULT NULL,<br>  `main_business` varchar(256) DEFAULT NULL,<br>  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,<br>  `price` decimal(10,2) DEFAULT NULL,<br>  PRIMARY KEY (`code`)<br>) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4</p>
<p>2.2 Stock.java</p>
<p>package com.zmannotes.spring.mybatis.domain;</p>
<p>public class Stock {</p>
<pre><code>private String code;

private String name;

private Integer count;

private String mainBusiness;

private Date createTime;

private BigDecimal price;</code></pre>
<p>//setter and getter<br>//…<br>}</p>
<p> <strong>3. 创建Dao(Mapper)</strong></p>
<p>package com.zmannotes.spring.mybatis.dao;</p>
<p>import com.zmannotes.spring.mybatis.domain.Stock;</p>
<p>public interface StockMapper {<br>    //根据PK删除<br>    int deleteByPrimaryKey(String code);<br>    //插入新纪录<br>    int insert(Stock record);<br>    //根据PK查询<br>    Stock selectByPrimaryKey(String code);<br>}</p>
<p> <strong>4. 配置映射文件</strong></p>
<p>//通过配置文件将 数据库表 与 对象、Dao关联起来<br><?xml version="1.0" encoding="UTF-8" ?><br><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" ><br><mapper namespace="com.zmannotes.spring.mybatis.dao.StockMapper" > <!--指定Dao--><br>  <resultMap id="BaseResultMap" type="com.zmannotes.spring.mybatis.domain.Stock" > <!--指定Domain类--><br>    <id column="code" property="code" jdbcType="VARCHAR" /><br>    <result column="name" property="name" jdbcType="VARCHAR" /><br>    <result column="count" property="count" jdbcType="INTEGER" /><br>    <result column="main\_business" property="mainBusiness" jdbcType="VARCHAR" /><br>    <result column="create\_time" property="createTime" jdbcType="TIMESTAMP" /><br>    <result column="price" property="price" jdbcType="DECIMAL" /><br>  </resultMap><br>  <sql id="Base\_Column\_List" ><br>    code, name, count, main_business, create_time, price<br>  </sql><br>  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String" ><br>    select<br>    <include refid="Base\_Column\_List" /><br>    from stock<br>    where code = #{code,jdbcType=VARCHAR}<br>  </select><br>  <delete id="deleteByPrimaryKey" parameterType="java.lang.String" ><br>    delete from stock<br>    where code = #{code,jdbcType=VARCHAR}<br>  </delete><br>  <insert id="insert" parameterType="com.zmannotes.spring.mybatis.domain.Stock" ><br>    insert into stock (code, name, count,<br>      main_business, create_time, price<br>      )<br>    values (#{code,jdbcType=VARCHAR}, #{name,jdbcType=VARCHAR}, #{count,jdbcType=INTEGER},<br>      #{mainBusiness,jdbcType=VARCHAR}, #{createTime,jdbcType=TIMESTAMP}, #{price,jdbcType=DECIMAL}<br>      )<br>  </insert><br></xml></p>
<p><strong>5. 配置数据源及SessionFactory</strong></p>
<?xml version="1.0" encoding="UTF-8"?>
<p><beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/tx
        http://www.springframework.org/schema/tx/spring-tx.xsd"><br>    <!-- dbcp2 数据源 --><br>    <bean id="stock\_dataSource" class="org.apache.commons.dbcp2.BasicDataSource"
          destroy-method="close"><br>        <property name="driverClassName" value="com.mysql.jdbc.Driver" /><br>        <property name="url" value="jdbc:mysql://123.57.144.1:3306/stock" /><br>        <property name="username" value="stock" /><br>        <property name="password" value="stock" /><br>        <property name="connectionInitSqls"><br>            <list><br>                <value>set names utf8mb4;</value><br>            </list><br>        </property><br>    </bean></p>
<pre><code>&lt;!-- 事务管理器 --&gt;
&lt;bean id=&quot;stock\_txManager&quot;
    class=&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;&gt;
    &lt;property name=&quot;dataSource&quot; ref=&quot;stock\_dataSource&quot; /&gt;
&lt;/bean&gt;

&lt;tx:annotation-driven transaction-manager=&quot;stock\_txManager&quot;
    mode=&quot;proxy&quot; proxy-target-class=&quot;true&quot; /&gt;

&lt;!-- 在使用mybatis时 spring使用sqlsessionFactoryBean 来管理mybatis的sqlsessionFactory --&gt;
&lt;!-- 创建sqlsessionFactory 并指定数据源 --&gt;
&lt;bean id=&quot;stock\_sqlSessionFactory&quot; class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&gt;
    &lt;property name=&quot;dataSource&quot; ref=&quot;stock\_dataSource&quot; /&gt;
    &lt;property name=&quot;typeAliasesPackage&quot;
        value=&quot;com.zmannotes.spring.mybatis.domain&quot; /&gt;
    &lt;!-- 配置扫描Mapper XML的位置 --&gt;
    &lt;property name=&quot;mapperLocations&quot;&gt;
        &lt;list&gt;
            &lt;value&gt;classpath:mybatis/stock/\*.xml&lt;/value&gt;
        &lt;/list&gt;
    &lt;/property&gt;
&lt;/bean&gt;

&lt;!-- 使用MapperScannerConfiguer 扫描来实现 --&gt;
&lt;!-- 这里指定了要扫描的映射接口的路径 --&gt;
&lt;bean class=&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;&gt;
    &lt;property name=&quot;basePackage&quot;&gt;
        &lt;value&gt;
            com.zmannotes.spring.mybatis.dao
        &lt;/value&gt;
    &lt;/property&gt;
    &lt;property name=&quot;sqlSessionFactoryBeanName&quot; value=&quot;stock\_sqlSessionFactory&quot; /&gt;
&lt;/bean&gt;</code></pre>
</beans>

<p><strong>6. 完成单测</strong></p>
<p>@RunWith(SpringJUnit4ClassRunner.class)<br>@ContextConfiguration(locations = “/spring/stock-session-factory.xml”)<br>public class StockTest {<br>    @Autowired<br>    private StockMapper stockMapper;</p>
<pre><code>/\*\*插入一条数据并自动回滚\*/
@Transactional
@Test
public void test()&#123;
    Stock stock = new Stock();
    stock.setCode(&quot;900001&quot;);
    stock.setName(&quot;tcl&quot;);
    stockMapper.insert(stock);
&#125;</code></pre>
<p>}</p>
<p><a target="_blank" rel="noopener" href="https://github.com/zman2013/spring-mybatis">源码Github</a> <strong>Q&amp;A</strong> Q：无聊的2<del>4步有没有快捷完成办法？ A：当然有！那就是Mybatis Generator，自动生成2</del>4所有代码。参考 <a target="_blank" rel="noopener" href="https://www.zmannotes.com/index.php/2016/05/05/mybatis-generator/">LINK</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2016/05/04/wordpress/spring-mybatis/" data-id="ckhoznqsr001ywpnighzd7v74" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-Mybatis/" rel="tag">Spring Mybatis</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-wordpress/multi-modules" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/27/wordpress/multi-modules/" class="article-date">
  <time datetime="2016-04-27T22:35:07.000Z" itemprop="datePublished">2016-04-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Spring/">Spring</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/27/wordpress/multi-modules/">系统分层(单系统多模块)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>介绍一般系统的分层思想和实现</em> <strong>1. 主流分层</strong>   <a target="_blank" rel="noopener" href="https://www.zmannotes.com/wp-content/uploads/2016/04/multiple-models.jpg"><img src="https://www.zmannotes.com/wp-content/uploads/2016/04/multiple-models.jpg" alt="multiple-models"></a> (每层对应一个或多个 模块/子系统，根据每层的复杂度进行进一步切分） <strong>2. 举例</strong> 一个结算系统包含业务层、引擎层、基础组件层，化简后，对应模块为业务模块settle-order-service、引擎模块settle-engine、数据模块settle-data。 2.1 创建项目根目录</p>
<p># 进入workspace目录<br>cd ~/workspace</p>
<h1 id="创建根目录"><a href="#创建根目录" class="headerlink" title="创建根目录"></a>创建根目录</h1><p>mvn archetype:generate -DarchetypeGroupId=org.codehaus.mojo.archetypes  -DarchetypeArtifactId=pom-root -DgroupId=com.zmannotes.spring -DartifactId=multiple-modules -Dversion=1.0.0-SNAPSHOT</p>
<p>2.2 创建业务模块 settle-order-service</p>
<p>cd multiple-modules</p>
<p>mvn -B archetype:generate -DarchetypeGroupId=org.apache.maven.archetypes -DgroupId=com.zmannotes.spring -DartifactId=settle-order-service</p>
<p>2.3 创建引擎模块settle-engine</p>
<p>mvn -B archetype:generate -DarchetypeGroupId=org.apache.maven.archetypes -DgroupId=com.zmannotes.spring -DartifactId=settle-engine</p>
<p>2.4 创建数据模块settle-data</p>
<p>mvn -B archetype:generate -DarchetypeGroupId=org.apache.maven.archetypes -DgroupId=com.zmannotes.spring -DartifactId=settle-data</p>
<p><strong>3. 完整的项目示例</strong> 3.1 所有模块 <a target="_blank" rel="noopener" href="https://www.zmannotes.com/wp-content/uploads/2016/04/whole-project-modules.png"><img src="https://www.zmannotes.com/wp-content/uploads/2016/04/whole-project-modules-300x250.png" alt="whole-project-modules"></a> 3.2 模块内部结构 <a target="_blank" rel="noopener" href="https://www.zmannotes.com/wp-content/uploads/2016/04/module-structure.png"><img src="https://www.zmannotes.com/wp-content/uploads/2016/04/module-structure-300x150.png" alt="module-structure"></a> <strong>4. 设置全局配置</strong> 修改multiple-modules目录下的pom.xml来设定全局配置。 4.1 统一设置所有子模块的默认依赖</p>
<!-- 添加默认测试依赖 -->
<dependencies>
    <!-- test -->
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.12</version>
        <scope>test</scope>
    </dependency>                                                                                                                                                    
    <dependency>
        <groupId>org.mockito</groupId>
        <artifactId>mockito-all</artifactId>
        <version>1.10.19</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>4.1.8.RELEASE</version>
        <scope>test</scope>
    </dependency>
</dependencies>

<p>4.2 统一设置所有子模块依赖的版本号</p>
<!-- 设置变量 -->
<properties>
    <!--设置编码-->
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <!-- 添加spring版本号配置 -->
    <spring.version>4.1.8.RELEASE</spring.version>
</properties>

<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${spring.version}</version>
        </dependency>
    </dependencies>
</dependencyManagement>

<p>4.3 设置发布仓库地址</p>
<distributionManagement>
    <repository>
        <id>deployRelease</id>
        <url>http://127.0.0.1:5081/nexus/content/repositories/releases/</url>
    </repository>
    <snapshotRepository>
        <id>deploySnapshot</id>
        <url>http://127.0.0.1:5081/nexus/content/repositories/snapshots/</url>
    </snapshotRepository>
</distributionManagement>

<p>4.4 设置JDK版本</p>
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.1</version>
            <configuration>
                <source>1.8</source>
                <target>1.8</target>
            </configuration>
        </plugin>
    </plugins>
</build>

<p> <em>Good Luck!</em></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2016/04/27/wordpress/multi-modules/" data-id="ckhoznqs1000swpnif4ow7ifw" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-%E6%A1%86%E6%9E%B6/" rel="tag">Spring 框架</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/maven-%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE/" rel="tag">maven 全局配置</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%A4%9A%E6%A8%A1%E5%9D%97/" rel="tag">多模块</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-wordpress/spring-mvc-web" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/16/wordpress/spring-mvc-web/" class="article-date">
  <time datetime="2016-04-16T12:43:47.000Z" itemprop="datePublished">2016-04-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Spring/">Spring</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/16/wordpress/spring-mvc-web/">Spring MVC项目框架</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>搭建基本的Spring MVC项目框架</em> 最终目录结构 <a target="_blank" rel="noopener" href="https://www.zmannotes.com/wp-content/uploads/2016/04/1-1.jpg"><img src="https://www.zmannotes.com/wp-content/uploads/2016/04/1-1.jpg" alt="spring mvc web structure"></a> <strong>1. 创建Maven Web项目</strong></p>
<p>// 建立名为spring-mvc-web的maven web项目<br>$ mvn archetype:generate -DarchetypeArtifactId=maven-archetype-webapp -DinteractiveMode=false -DgroupId=com.zmannotes.spring -DartifactId=spring-mvc-web</p>
<p>2. 修改pom.xml如下</p>
<?xml version="1.0"?>
<p><project
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
    xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><br>    <modelVersion>4.0.0</modelVersion></p>
<pre><code>&lt;groupId&gt;com.zmannotes.spring&lt;/groupId&gt;
&lt;artifactId&gt;spring-mvc-web&lt;/artifactId&gt;
&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
&lt;packaging&gt;war&lt;/packaging&gt;
&lt;name&gt;spring mvc web&lt;/name&gt;

&lt;properties&gt;
    &lt;spring.version&gt;4.2.5.RELEASE&lt;/spring.version&gt;
&lt;/properties&gt;

&lt;dependencies&gt;

    &lt;!-- spring mvc --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework&lt;/groupId&gt;
        &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;
        &lt;version&gt;$&#123;spring.version&#125;&lt;/version&gt;
    &lt;/dependency&gt;

&lt;/dependencies&gt;</code></pre>
</project>

<p>3. 修改web.xml如下</p>
<?xml version="1.0" encoding="UTF-8"?>
<p><web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:jsp="http://java.sun.com/xml/ns/javaee/jsp"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app\_3\_0.xsd"
    version="3.0"></p>
<pre><code>&lt;display-name&gt;Spring MVC Web&lt;/display-name&gt;

&lt;!-- 默认加载配置文件applicationContext.xml，配置web运行的上下文 --&gt;
&lt;listener&gt;
    &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;
&lt;/listener&gt;

&lt;!-- 指定请求分发器，所有.htm结尾的请求都会统一交给DispatcherServlet进行分发 --&gt;
&lt;servlet&gt;
    &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;
    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;
&lt;/servlet&gt;
&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;
    &lt;url-pattern&gt;\*.htm&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;

&lt;!-- 指定request和response编码，统一为utf-8 --&gt;
&lt;filter&gt;
    &lt;filter-name&gt;CharacterFilter&lt;/filter-name&gt;
    &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;encoding&lt;/param-name&gt;
        &lt;param-value&gt;utf-8&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;force&lt;/param-name&gt;
        &lt;param-value&gt;true&lt;/param-value&gt;
    &lt;/init-param&gt;
&lt;/filter&gt;
&lt;filter-mapping&gt;
    &lt;filter-name&gt;CharacterFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;/\*&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;</code></pre>
</web-app>

<p>4. 添加配置文件applicationContext.xml</p>
<?xml version="1.0" encoding="UTF-8"?>
<p><beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="  http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context.xsd "></p>
<pre><code>&lt;!-- 此文件定义共享的配置信息 --&gt;

&lt;!-- 加载配置文件 --&gt;
&lt;context:property-placeholder
        location=&quot;classpath:application.properties&quot;/&gt;</code></pre>
</beans>

<p>5. 添加配置文件dispatcher-servlet.xml</p>
<?xml version="1.0" encoding="UTF-8"?>
<p><beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/mvc 
        http://www.springframework.org/schema/mvc/spring-mvc.xsd"></p>
<pre><code>&lt;!-- 扫描指定package下的Controller类 --&gt;
&lt;context:component-scan base-package=&quot;com.zmannotes.spring.web.controller&quot; /&gt;

&lt;!-- 激活spring mvc功能 --&gt;
&lt;mvc:annotation-driven/&gt;

&lt;!-- 指定web页面根路径和拓展名 --&gt;
&lt;bean id=&quot;viewResolver&quot;
    class=&quot;org.springframework.web.servlet.view.UrlBasedViewResolver&quot;&gt;
    &lt;property name=&quot;viewClass&quot;
        value=&quot;org.springframework.web.servlet.view.JstlView&quot; /&gt;
    &lt;property name=&quot;prefix&quot; value=&quot;/view/&quot; /&gt;
    &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot; /&gt;
&lt;/bean&gt;</code></pre>
</beans>

<p>6 创建key-value配置文件application.properties（非必须）</p>
<p>key1=value1</p>
<p>7 创建HomeController.java</p>
<p>package com.zmannotes.spring.web.controller;</p>
<p>import org.springframework.stereotype.Controller;<br>import org.springframework.ui.Model;<br>import org.springframework.web.bind.annotation.RequestMapping;<br>import org.springframework.web.bind.annotation.RequestParam;</p>
<p>@Controller                     // 标明此类是一个Controller<br>@RequestMapping(“/home”)        // 标明Url根路径为/home<br>public class HomeController {</p>
<pre><code>@RequestMapping(&quot;hi&quot;)       // 标明Url子路径为hi
public String hi(
        @RequestParam(name = &quot;name&quot;, defaultValue = &quot;hacker&quot;) String name,
        Model model) &#123;

    String msg = String.format(&quot;Welcome %s&quot;, name);

    model.addAttribute(&quot;msg&quot;, msg);

    // 返回名为home的页面
    return &quot;home&quot;;
&#125;</code></pre>
<p>}</p>
<p>8 启动Web 8.1 启动</p>
<p>$ mvn jetty:run</p>
<p>8.2 看到如下信息，表明启动成功</p>
<p>…<br>[INFO] Started ServerConnector@2d64160c{HTTP/1.1,[http/1.1]}{0.0.0.0:8080}<br>[INFO] Started @12089ms<br>[INFO] Started Jetty Server</p>
<p>8.3 访问Url: localhost:8080/home/hi.htm?name=zman <a target="_blank" rel="noopener" href="https://github.com/zman2013/spring-mvc-web">源码 GitHub</a> Q&amp;A Q：applicationContext.xml与xxx-servlet.xml的关系？ A：servlet可以有多个，每个xxx-servlet.xml配置应当只配置此servlet专有的信息。而applicationContext.xml用来配置多个servlet共享的bean等信息，且是非必须的。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2016/04/16/wordpress/spring-mvc-web/" data-id="ckhoznqsq001wwpni3xao7frw" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-MVC/" rel="tag">Spring MVC</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-Web/" rel="tag">Spring Web</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-Web%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/" rel="tag">Spring Web项目搭建</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jetty-run/" rel="tag">jetty:run</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-wordpress/spring-basic-web" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/16/wordpress/spring-basic-web/" class="article-date">
  <time datetime="2016-04-16T09:28:03.000Z" itemprop="datePublished">2016-04-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Spring/">Spring</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/16/wordpress/spring-basic-web/">快速开发Spring Web应用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>基于spring boot可以秒建一个基本__web应用</em> <strong>1. 创建maven项目</strong></p>
<p>//创建名为spring-basic-web的maven项目<br>$ mvn -B archetype:generate -DarchetypeGroupId=org.apache.maven.archetypes -DgroupId=com.zmannotes.spring -DartifactId=spring-basic-web</p>
<p><em>（详细说明请参考: <a target="_blank" rel="noopener" href="https://www.zmannotes.com/index.php/2016/04/16/spring-basic-application/">快速开发Spring Application</a>)</em> <strong>2. 导入STS/Eclipse/IntelliJ</strong> <strong>3. 修改pom.xml内容如下</strong></p>
<p><project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4\_0\_0.xsd"><br>    <modelVersion>4.0.0</modelVersion><br>    <groupId>com.zmannotes.spring</groupId><br>    <artifactId>spring-basic-web</artifactId><br>    <packaging>jar</packaging><br>    <version>1.0-SNAPSHOT</version><br>    <name>spring-basic-web</name></p>
<pre><code>&lt;!-- 父配置文件，继承通用的配置 --&gt;
&lt;parent&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
    &lt;version&gt;1.3.3.RELEASE&lt;/version&gt;
&lt;/parent&gt;

&lt;dependencies&gt;
    &lt;!-- spring web 依赖 --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;junit&lt;/groupId&gt;
        &lt;artifactId&gt;junit&lt;/artifactId&gt;
        &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;

&lt;build&gt;
    &lt;plugins&gt;
        &lt;!-- 打包用插件 --&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/build&gt;</code></pre>
</project>

<p><strong>4. 例子</strong> 建立一个web服务，访问Url，返回json串。 4.1 创建json串对应的Java对象</p>
<p>package com.zmannotes.spring.domain;</p>
<p>public class HomeResponse {<br>    /** 响应码 */<br>    private int code;<br>    /** 响应信息 */<br>    private String message;</p>
<pre><code>public HomeResponse(int code, String msg) &#123;
    this.code = code;
    this.message = msg;
&#125;

public int getCode() &#123;
    return code;
&#125;

public String getMessage() &#123;
    return message;
&#125;</code></pre>
<p>}</p>
<p>4.2 创建Controller对象</p>
<p>package com.zmannotes.spring.controller;</p>
<p>import org.springframework.web.bind.annotation.RequestMapping;<br>import org.springframework.web.bind.annotation.RequestParam;<br>import org.springframework.web.bind.annotation.RestController;</p>
<p>import com.zmannotes.spring.domain.HomeResponse;</p>
<p>@RestController                 //标明此类是一个Controller<br>@RequestMapping(“/home”)        //标明Url根路径为/home<br>public class HomeController {</p>
<pre><code>@RequestMapping(&quot;hi&quot;)       //标明Url子路径为hi
public HomeResponse hi(
        @RequestParam(name = &quot;name&quot;, defaultValue = &quot;hacker&quot;) String name) &#123;

    String msg = String.format(&quot;Welcome %s&quot;, name);

    HomeResponse response = new HomeResponse(0, msg);

    return response;
&#125;</code></pre>
<p>}</p>
<p>4.3 修改App.java</p>
<p>package com.zmannotes.spring;</p>
<p>import org.springframework.boot.SpringApplication;<br>import org.springframework.boot.autoconfigure.SpringBootApplication;</p>
<p>@SpringBootApplication<br>public class App {<br>    public static void main(String[] args) {<br>        SpringApplication.run(App.class, args);<br>    }<br>}</p>
<p>至此开发阶段完成！ <strong>5. 打包、运行</strong> 5.1 打包 <code>$ mvn clean package</code> 5.2 运行</p>
<p>$ java -jar target/spring-basic-web-1.0-SNAPSHOT.jar</p>
<p><strong>6. 测试</strong> 6.1 访问Url：<a target="_blank" rel="noopener" href="http://localhost:8080/home/hi?name=zman">http://localhost:8080/home/hi?name=zman</a> 6.2 返回信息如下：</p>
<p>{<br>    code: 0,<br>    message: “Welcome zman”<br>}</p>
<p><a target="_blank" rel="noopener" href="https://github.com/zman2013/spring-basic-web">源码 GitHub</a> <strong>Q&amp;A</strong> Q：为什么没有用到tomcat这类的容器？ A：Spring boot已经在项目依赖中自动内嵌了tomcat，因此不需要外置的tomcat容器了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2016/04/16/wordpress/spring-basic-web/" data-id="ckhoznqsn001qwpnigh2ee5ab" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-MVC/" rel="tag">Spring MVC</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-Web/" rel="tag">Spring Web</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-Web%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/" rel="tag">Spring Web项目搭建</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-wordpress/spring-basic-application" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/16/wordpress/spring-basic-application/" class="article-date">
  <time datetime="2016-04-16T04:06:03.000Z" itemprop="datePublished">2016-04-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Spring/">Spring</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/16/wordpress/spring-basic-application/">快速开发Spring Application</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>最近为公司其他语言的同事介绍Spring框架的入门知识，在此整理为Spring系列</em> <strong>开发环境</strong> JDK</p>
<p>1.8_xx</p>
<p>IDE</p>
<p>Eclipse/STS (推荐使用STS，Spring团队基于Eclipse开发的IDE，很适合做Spring项目开发）</p>
<p>IntelliJ</p>
<p>项目管理工具</p>
<p>Maven3.xx</p>
<p><strong>Spring Basic Application</strong> <strong>1. 使用maven创建新项目</strong></p>
<p>命令格式如下：<br>mvn -B archetype:generate -DarchetypeGroupId=org.apache.maven.archetypes -DgroupId=xxx -DartifactId=xxx<br>需要指定：<br>    groupId 一般格式为 com.公司名.系统名<br>    artifactId 项目名称，单词之间用 - 分割</p>
<p>例子：<br>$: mvn -B archetype:generate -DarchetypeGroupId=org.apache.maven.archetypes -DgroupId=com.zmannotes.spring -DartifactId=spring-basic-application</p>
<p>在当前目录得到一个名为spring-basic-application的项目</p>
<p><strong>2. 将新创建的项目导入STS/Eclipse</strong> 2.1 打开STS，选择菜单 File -&gt; Import 2.2 选择Maven -&gt; Existing Maven Projects，点击Next <a target="_blank" rel="noopener" href="https://www.zmannotes.com/wp-content/uploads/2016/04/1.jpg"><img src="https://www.zmannotes.com/wp-content/uploads/2016/04/1.jpg" alt="import maven project"></a> 2.3 在新的窗口中选择第1步创建的spring-basic-application目录，点击Finish即可。 2.4 最终导入项目如下 <a target="_blank" rel="noopener" href="https://www.zmannotes.com/wp-content/uploads/2016/04/2-1.jpg"><img src="https://www.zmannotes.com/wp-content/uploads/2016/04/2-1.jpg"></a> <strong>3. 配置项目依赖，引入Spring框架，编辑pom.xml文件，内容如下</strong></p>
<p><project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4\_0\_0.xsd"><br>    <modelVersion>4.0.0</modelVersion><br>    <groupId>com.zmannotes.spring</groupId><br>    <artifactId>spring-basic-application</artifactId><br>    <packaging>jar</packaging><br>    <version>1.0-SNAPSHOT</version><br>    <name>spring-basic-application</name></p>
<pre><code>&lt;!-- 父配置文件，继承通用的配置 --&gt;
&lt;parent&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
    &lt;version&gt;1.3.3.RELEASE&lt;/version&gt;
&lt;/parent&gt;

&lt;dependencies&gt;
    &lt;!-- spring 依赖 --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;junit&lt;/groupId&gt;
        &lt;artifactId&gt;junit&lt;/artifactId&gt;
        &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;

&lt;build&gt;
    &lt;!-- 打包用插件 --&gt;
    &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/build&gt;</code></pre>
</project>

<p><strong>4. 实现一个例子</strong> 一个工人每间隔1s工作一段时间 4.1 创建Worker.java</p>
<p>package com.zmannotes.spring.worker;</p>
<p>import org.springframework.stereotype.Component;</p>
<p>@Component    //Component注解 标明该类可以被自动发现<br>public class Worker {</p>
<pre><code>public void start() throws InterruptedException &#123;
    while (true) &#123;
        System.out.println(&quot;I&#39;m working...&quot;);
        // 暂时1s
        Thread.sleep(1000);
    &#125;
&#125;</code></pre>
<p>}</p>
<p>4.2 修改App.java，使其调用Worker</p>
<p>package com.zmannotes.spring;</p>
<p>import org.springframework.beans.factory.annotation.Autowired;<br>import org.springframework.boot.CommandLineRunner;<br>import org.springframework.boot.SpringApplication;<br>import org.springframework.boot.autoconfigure.SpringBootApplication;</p>
<p>import com.zmannotes.spring.worker.Worker;</p>
<p>/**<br> * Hello world!<br> *<br> */<br>@SpringBootApplication  //激活Spring注解：@Component @Autowired等<br>public class App implements CommandLineRunner {</p>
<pre><code>@Autowired  //自动注入Worker对象
private Worker worker;

/\*\* main函数 \*/
public static void main( String\[\] args )
&#123;
    SpringApplication.run(App.class);
&#125;

/\*\* 程序入口 \*/
public void run(String... args) throws Exception &#123;
    worker.start();
&#125;</code></pre>
<p>}</p>
<p>4.3 最终目录结构 <a target="_blank" rel="noopener" href="https://www.zmannotes.com/wp-content/uploads/2016/04/4.jpg"><img src="https://www.zmannotes.com/wp-content/uploads/2016/04/4.jpg" alt="spring-basic-application-structure-final"></a> <strong>5 运行程序</strong> 5.1 右击App.java，选择Run As -&gt; Java Application <a target="_blank" rel="noopener" href="https://www.zmannotes.com/wp-content/uploads/2016/04/3.jpg"><img src="https://www.zmannotes.com/wp-content/uploads/2016/04/3.jpg" alt="sts-run-java-application"></a> 5.2 输出结果如下</p>
<p>  .   ____          _            __ _ _<br> /\\ / ___‘_ __ _ _(_)_ __  __ _ \ \ \ \<br>( ( )\___  ‘_  ‘_  ‘_ \/ _`  \ \ \ \<br> \\/  ___) _)      (_   ) ) ) )<br>  ‘  ____ .___ __ _\__,  / / / /<br> =========_==============___/=/_/_/_/<br> :: Spring Boot ::        (v1.3.3.RELEASE)</p>
<p>2016-04-16 10:54:08.843  INFO 6072 — [           main] com.zmannotes.spring.App                 : Starting App on evo with PID 6072 (\workspace\spring-tutorial\spring-basic-application\spring-basic-application\target\classes started by zman in \workspace\spring-tutorial\spring-basic-application\spring-basic-application)<br>2016-04-16 10:54:08.843  INFO 6072 — [           main] com.zmannotes.spring.App                 : No active profile set, falling back to default profiles: default<br>2016-04-16 10:54:08.937  INFO 6072 — [           main] s.c.a.AnnotationConfigApplicationContext : Refreshing org.springframework.context.annotation.AnnotationConfigApplicationContext@3891771e: startup date [Sat Apr 16 10:54:08 CST 2016]; root of context hierarchy<br>2016-04-16 10:54:10.614  INFO 6072 — [           main] o.s.j.e.a.AnnotationMBeanExporter        : Registering beans for JMX exposure on startup<br>I’m working…<br>I’m working…<br>I’m working…<br>I’m working…<br>I’m working…</p>
<p><strong>6 打包、运行</strong> 6.1 回到console中spring-basic-application目录下，运行<code>mvn clean package</code>，会在target目录下生成spring-basic-application.jar 6.2 运行jar包   <code>java -jar target/spring-basic-application-1.0-SNAPSHOT.jar</code> 6.3 输出与5.2相同 :) <a target="_blank" rel="noopener" href="https://github.com/zman2013/spring-basic-application">源码 GitHub</a> <strong>Q&amp;A</strong> Q：pom.xml是什么东西？ A：pom.xml文件时maven项目的标志性文件，在此文件中配置项目的依赖、打包方式等各种配置信息，maven通过解析、执行pom.xml中的配置进行项目的管理、打包、发布。 Q：没感觉到Spring框架的强大 A：的确。这个基础应用只使用了Spring最核心最基本的注入功能，简单来说就是把一个对象注入到另一个对象供其使用。注入关系是通过注解@Autowired的方式声明，由spring统一管理的。（当然还有另一种方式通过配置xml的方式进行声明）可以尝试一下不是Spring，如果完成上面的例子。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2016/04/16/wordpress/spring-basic-application/" data-id="ckhoznqsi001lwpnifc5z9dvy" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-Application/" rel="tag">Spring Application</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-Demo/" rel="tag">Spring Demo</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-%E4%BE%8B%E5%AD%90/" rel="tag">Spring 例子</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-%E6%A1%86%E6%9E%B6/" rel="tag">Spring 框架</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/" rel="tag">Spring项目搭建</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-wordpress/code-version-management" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/02/28/wordpress/code-version-management/" class="article-date">
  <time datetime="2016-02-28T08:57:52.000Z" itemprop="datePublished">2016-02-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/SVN-Git/">SVN Git</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/02/28/wordpress/code-version-management/">代码版本管理 SVN Git</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>介绍团队协作中代码管理的基本规则及命令</em> 系统开发中不可避免几个人对同一个包进行修改。 背景：代码主干(trunk/master)已经稳定，团队协作进行一般的功能迭代开发。 流程：</p>
<ol>
<li> 团队每个成员基于主干最新版本建立分支。</li>
<li> 每个成员基于各自分支进行功能开发，并确保每天将主干最新代码合并到自己的分支。</li>
<li> 每个成员每完成一个功能，确保不影响正常业务的前提下，将改动的代码合并到主干。</li>
</ol>
<p><strong>SVN相关命令</strong> 1.  建立分支</p>
<p>//基于主干创建分支<br>//svn cp -m ‘create branch’ trunk-url new-branch-url<br>svn cp -m ‘create branch …’ <a target="_blank" rel="noopener" href="http://svn.com/svn/pay/trunk">http://svn.com/svn/pay/trunk</a> <a target="_blank" rel="noopener" href="http://svn.com/svn/pay/branches/branch-01">http://svn.com/svn/pay/branches/branch-01</a></p>
<p>2. 主干 -&gt; 分支</p>
<p>//切换到branch-01目录下<br>cd ~/workspace/pay/branch-01<br>//把trunk上的改动合并到branch-01<br>//svn merge trunk-url<br>svn merge <a target="_blank" rel="noopener" href="http://svn.com/svn/pay/trunk">http://svn.com/svn/pay/trunk</a><br>//突处理冲突，提交</p>
<p>3. 分支 -&gt; 主干</p>
<p>//切换到主干目录下<br>cd ~/workspace/pay/trunk<br>//把branche-01上的改动merge到trunk<br>//svn merge –reintegrate branch-url<br>svn merge –reintegrate <a target="_blank" rel="noopener" href="http://svn.com/svn/pay/branches/branch-01">http://svn.com/svn/pay/branches/branch-01</a><br>//处理冲突，提交</p>
<p><strong>*</strong> 不要用 svn merge -r XX:HEAD branch-url 其他常用命令</p>
<p>1. 查看修改状态<br>   svn status<br>2. 删除分支<br>   svn rm -m “del branch-01” <a target="_blank" rel="noopener" href="http://svn.com/svn/pay/branches/branch-01">http://svn.com/svn/pay/branches/branch-01</a><br>3. 查看指定branch的不同version之间的diff（默认为本地代码对应分支）<br>   svn diff -r999:111 <a target="_blank" rel="noopener" href="http://svn.com/svn/pay/branches/branch-01">http://svn.com/svn/pay/branches/branch-01</a><br>4. 查看版本修改信息<br>   svn log –verbose –stop-on-copy <a target="_blank" rel="noopener" href="http://svn.com/svn/pay/branches/branch-01">http://svn.com/svn/pay/branches/branch-01</a></p>
<p><strong>Git 相关命令</strong> 1. 建立远程分支</p>
<p>//建议直接通过网页UI建立分支，或者通过以下命令建立分支<br>//clone主干到本地<br>git clone <a target="_blank" rel="noopener" href="https://git.com/zmannotes/pay.git">https://git.com/zmannotes/pay.git</a><br>cd pay<br>//push到本地分支masetr到远程分支branch-01，此时如果git服务器没有远程分支，会自动创建远程分支branch-01<br>//git push origin &lt;local_branch_name&gt;:&lt;remote_branch_name&gt;<br>git push origin master:branch-01<br>//基于远程分支branch-01建立本地分支branch-01<br>git checkout -b branch-01 origin/branch-01</p>
<p>2. 主干 -&gt; 分支</p>
<p>//切换到分支branch-01<br>git checkout branch-01<br>//合并主干到分支branch-01<br>git merge master<br>//处理冲突,提交,发布</p>
<p>3. 分支 -&gt; 主干</p>
<p>//切换到主干<br>git checkout master<br>//合并分支branch-01改动到主干<br>git merge branch-01<br>//处理冲突,提交,发布</p>
<p>其他常用命令</p>
<p>1. 当前修改状态<br>   git status<br>2. 删除分支<br> git branch -d branch-name<br>3. 获取远程分支信息<br>   git fetch<br>4. 获取所有(本地和远程)分支信息 (*表示当前正在使用的分支）<br>   git branch -a<br>5. 显示远程库映射<br>   git remote -v</p>
<p><strong>Git vs SVN</strong> Q：哪个更好？ A：这个问题比较可怕，两个阵营的人吵成一锅粥，你觉得哪个好就哪个好！反正我用Git更顺手，不多说了…</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2016/02/28/wordpress/code-version-management/" data-id="ckhoznqrf0004wpni8vnabuzk" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Git/" rel="tag">Git</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SVN/" rel="tag">SVN</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/merge/" rel="tag">merge</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BB%A3%E7%A0%81%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86/" rel="tag">代码版本管理</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-wordpress/cap" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/24/wordpress/cap/" class="article-date">
  <time datetime="2016-01-24T03:21:29.000Z" itemprop="datePublished">2016-01-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/MQ/">MQ</a>►<a class="article-category-link" href="/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/">分布式系统</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/24/wordpress/cap/">CAP理论的应用分析</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>分析CAP的缺陷及实际应用</em> <strong>CAP理论的应用缺陷</strong> 互联网公司中分布式系统设计一般都会考虑三个问题，高可用性、网络抖动、数据一致性问题。这三个问题全部是针对系统的后台集群来讨论，不包括系统的终端。<em>如果你的系统不需要考虑数据一致性问题，那真是太幸运了！</em> CAP理论证明在分布式系统中不能同时满足这三个特征，只能满足其中两点。就是后半句话引起了人们在实际应用中的困惑和对理论的质疑。 来看CAP的定义： Consistency：集群中所有节点的数据始终保持一致性。 Availability：集群中即使有部分节点挂了，集群依然可以对外提供服务。 Partition Tolerance：集群中即使节点之间不能互相通信，集群依然对外提供服务。（节点没挂，只是节点之间不能通信，比如网络抖动） <strong>“满足其中两点”引发的困惑</strong> <strong>困惑一</strong> CP：为了实现一致性和分区容忍性必须放弃可用性。 实际应用中，比如系统存在A、B两个节点(或网络分区)，数据写入A后，网络发生抖动导致A、B通信中断，数据无法写入B，为了保证数据一致性，系统将无法继续提供服务直到B完成写入，AB达到数据一致的状态。如果A、B通信永远不恢复，系统将永远不可用，这在实际应用中不可接受。 <strong>困惑二</strong> CA：为了实现一致性和可用性放弃分区容忍性。 实际应用中，比如系统存在A、B两个节点(或网络分区)，数据写入A后，网络发生抖动导致A、B通信中断，数据无法写入B，为了保证数据一致性，系统将无法继续提供服务直到B完成写入，AB达到数据一致的状态。如果A、B通信永远不恢复，系统将永远不可用，这在实际应用中不可接受。 是的，实际应用中CP、CA本质上没有区别，同样是面对网络抖动问题，为了满足一致性，都会导致系统无法使用。这是因为实际应用中，节点A没有办法判断节点B是挂掉了、还是无法与其正常通信。于是CA和CP在不引入第三方组件的情况下都是无法达到的。而这完全是由C（一致性）导致，所以如果可以在业务上避免对分布式系统的一致性要求那是极好的！ <strong>实际应用分析</strong> <strong>只求AP</strong> 放弃一致性，保证系统高可用、高扩展性、分区容忍性。系统设计将极大简化，同时保证高可用、高扩展，系统的运维也很方便，最终的结果是从设计、开发、测试、上线、运维都极大的降低了成本。就如Amazon SQS，的确是不错。 <strong>寻求A、C折中</strong> 网络抖动时，保留一致性，放弃可用性。在一定时间窗口内(比如5s)，如果服务依然没有恢复，就放弃一致性，恢复对外提供服务。这种策略在实际应用比较普遍，根据具体的业务场景，设定一个时间窗口，保证系统在可容忍的时间内尽可能保持一致性，如果实在保证不了，那就放弃一致性，继续提供服务。毕竟更多时候，不能提供服务造成的损失要比部分数据不一致造成的损失大很多。更多的时候，我们自然而然的把failover逻辑放在系统的终端实现，就如ActiveMQ的failover、<a target="_blank" rel="noopener" href="https://www.zmannotes.com/index.php/2016/01/17/rocketmq/">RocketMQ</a>的rebalance。 耶鲁Daniel教授将此方法上升到理论层面提出PACELC，还发表了论文。 总而言之，在分布式系统中，能在业务层面回避一致性就回避。实在做不到，就进行可用性与一致性的折中<em>。对于CAP是什么，可以完全抛到脑后，它只能带来困惑。</em> <strong><a target="_blank" rel="noopener" href="https://www.zmannotes.com/index.php/2016/01/24/cap/">LINK</a></strong></p>
<ol>
<li> <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/CAP/_theorem#cite\_note-Burgess-7">https://en.wikipedia.org/wiki/CAP\_theorem#cite\_note-Burgess-7</a></li>
<li> <a target="_blank" rel="noopener" href="https://www.quora.com/What-is-the-difference-between-availability-and-partition-tolerance-in-CAP">https://www.quora.com/What-is-the-difference-between-availability-and-partition-tolerance-in-CAP</a></li>
<li> <a target="_blank" rel="noopener" href="http://dbmsmusings.blogspot.com/2012/10/ieee-computer-issue-on-cap-theorem.html">http://dbmsmusings.blogspot.com/2012/10/ieee-computer-issue-on-cap-theorem.html</a></li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2016/01/24/wordpress/cap/" data-id="ckhoznqrc0002wpniedjz3nt5" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CAP/" rel="tag">CAP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%B8%80%E8%87%B4%E6%80%A7/" rel="tag">一致性</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/" rel="tag">分布式系统设计</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-wordpress/rocketmq" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/17/wordpress/rocketmq/" class="article-date">
  <time datetime="2016-01-17T13:05:44.000Z" itemprop="datePublished">2016-01-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/MQ/">MQ</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/17/wordpress/rocketmq/">RocketMQ，队列选型</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>介绍RocketMQ和队列选型方法</em> <strong><a target="_blank" rel="noopener" href="https://github.com/alibaba/RocketMQ">RocketMQ</a></strong> RocketMQ是国内比较成功的开源消息队列，由阿里的团队贡献，不少互联网公司使用。 性能好，Broker收发速率都是万级别水平。 水平扩展很方便，Broker不够用，直接加机器。 已消费的消息可以再次消费。 不支持任何消息协议，如：AMQP,STOMP,MQTT。 开源客户端只有Java版（C版有开源，但未完成，无法使用）。 没有监控机制。 <strong>多语言支持</strong> RocketMQ只有Java客户端，C是一个未成品。 RocketMQ客户端的逻辑很重，既要从nameserver获取broker信息，又包含负载均衡逻辑，还会向broker同步offset信息。 经评估，用JNI封装一个C客户端成本更低。开发完成一定要进行长时间大数据性能测试，观察cpu、memory使用情况。 Php使用php-java-bridge做为agent来间接实现，太不舒服了。 最初选型是看上了RocketMQ已消费消息可查的特性，但目前综合来看，RocketMQ并不是一个好的选择。已消费消息可查是否有必要作为mq的特性呢？ <strong>主从切换</strong> 主从切换主要是对于有序消费有用。 具体实现步骤：(涉及nameserver与broker逻辑改动）</p>
<ol>
<li> Master与Slave断开连接后，Slave会在时间窗口(30s)内尝试与Master重连，超时后，Slave向NameServer申请升级为Master。</li>
<li> 如果此时NameServer也与Master没有连接，则授权Slave升级为Master。</li>
<li> Slave收到确认信息后，停止申请请求。停止ReputMessageService，启动ScheduleMessageService。</li>
<li> Slave修改自身brokerId为0，修改自身标志位ASYNC_SLAVE。</li>
<li> Slave向NameServer注册为Master。</li>
<li> NameServer新增逻辑支持每个BrokerName有且仅有一个Master(保证old Master不能重新注册)。</li>
</ol>
<p><strong>队列选型</strong> 队列选型可以从以下几个指标出发：</p>
<ol>
<li> 支持什么语言？</li>
<li> 是否有监控？</li>
<li> HA如何？</li>
<li> 是否支持持久化？</li>
<li> 是否支持有序消费？</li>
<li> 是否支持延迟消息？</li>
<li> 开发团队是否可以理解并修改源码？</li>
<li> 社区是否活跃，响应是否迅速？</li>
<li> 性能</li>
</ol>
<p><strong>Q：</strong>支持什么语言的客户端？ <strong>A：</strong>我觉得这是最优先考虑的，如果没有你期望的语言，可以直接放弃。因为开发一个新语言版本，首先要求对client与broker的通信协议有清楚的了解，另外从编码完成到成熟稳定一般是一个长期过程。（其实也可以通过jni或者agent来间接封装client，事实我们就是这么做的，但终究失去了美感）</p>
<p>RocketMQ只有Java版本。</p>
<p>ActiveMQ和RabbitMQ支持所有主流变成语言，由于都支持AMQP、STOMP，于是基本覆盖了全部语言。</p>
<p><strong>Q：</strong>是否有监控？ <strong>A：</strong>没监控的直接pass，否则mq响应慢，甚至挂了都不知道。直观了解各queue的状态信息也能为业务优化带来很大便利。</p>
<p>RabbitMQ监控平台最友好，ActiveMQ次之，RocketMQ的第三方监控平台可以用。</p>
<p><strong>Q：</strong>高可用性？是否支持failover？failover过程中是否会丢消息？ <strong>A：</strong>高可用性差，MQ就会变成系统的单点，进而引起上下游系统的容错性、稳定性问题。</p>
<p>RabbitMQ集群化最方便，而且能动态配置，集群中所有节点拥有相同的元数据。所有client都与master进行通信，master将update同步给所有slave。slave过多会占用较多网络带宽。(<a target="_blank" rel="noopener" href="http://www.rabbitmq.com/ha.html">LINK</a>)</p>
<p>ActiveMQ有三种集群化方式，共享文件系统、数据库方式、备份方式。备份方式不支持延迟消息。主从切换过程中非持久化消息会丢失。(<a target="_blank" rel="noopener" href="http://activemq.apache.org/masterslave.html">LINK</a>)</p>
<p>RocketMQ可以配置多Master，且每个Master可以配置一个Slave。如果一个Master挂掉，此Master对应Slave不会自动升级为Master但会继续提供读服务，写只能向其他Master写。</p>
<p>以上三种在failover过程中，都可能出现重复消息。</p>
<p><strong>Q：</strong>持久化、有序性、延迟消息？ <strong>A：</strong>Rabbit、Active、RocketMQ都支持消息持久化和有序消费。RabbitMQ不支持延迟消息，Active和RocketMQ支持延迟消息。 <strong>Q：</strong>自己的开发团队能够掌握源码并进行功能开发？社区活跃度？ <strong>A：</strong>这个比较关键，随时都可能遇到一个罕见的bug或者业务需要定制的功能，如果开发团队不能hold住，那就真没办法了。</p>
<p>ActiveMQ和RabbitMQ社区很活跃，问题也能及时得到响应，RabbitMQ用Erlang开发的。RocketMQ没有社区。。</p>
<p><strong>Q：</strong>单机broker性能？ <strong>A：</strong>RocketMQ &gt; RabbitMQ &gt; ActiveMQ。对于一般业务，性能不会是瓶颈，也不是选型的核心指标，没必要花费较多时间在上面。单机4000、5000的qps，足够了，不够建集群。 <strong>Q：</strong>有没有MQ可以避免消息重复？ <strong>A：</strong>N/A，消费端做好幂等吧~ <strong>踩过的坑</strong> <strong>1.</strong> 低版本的ActiveMQ存在hang住情况，broker拒绝接受producer的消息，consumer接受不到任何消息。</p>
<p>由非持久化消息的临时存储文件泄露导致无法自动删除引起。</p>
<p>5.9.0以后的版本已经修复了这bug。</p>
<p><strong>2.</strong> RabbitMQ消息堆积，超出内存限制引起数据写入硬盘会导致producer生产、consumer消费极慢。</p>
<p>从硬盘读取消息，然后在五个内部队列间切换消息状态，导致消息消费极慢，进而流控消息写入的速度。</p>
<p>只要消息堆积过多，引起写入硬盘就有此问题。</p>
<p>  <em>RocketMQ的代码跟他妈狗屎一样。</em></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2016/01/17/wordpress/rocketmq/" data-id="ckhoznqsf001fwpni3tm319g5" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ActiveMQ/" rel="tag">ActiveMQ</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/RabbitMQ/" rel="tag">RabbitMQ</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/RocketMQ/" rel="tag">RocketMQ</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%98%9F%E5%88%97%E9%80%89%E5%9E%8B/" rel="tag">队列选型</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/2/">&amp;laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/4/">Next &amp;raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Database/">Database</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/HttpClient/">HttpClient</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/IoT/">IoT</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/MQ/">MQ</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mock/">Mock</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/RPC/">RPC</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/SVN-Git/">SVN Git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring/">Spring</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Unit-Test/">Unit Test</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/WordPress/">WordPress</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/code-generator/">code generator</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/container/">container</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/log/">log</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/mybatis/">mybatis</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/performance-optimize/">performance_optimize</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/pull-stream/">pull-stream</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/tcp/">tcp</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/unity/">unity</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vue/">vue</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/">分布式系统</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/">开发环境</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ibd/" rel="tag">.ibd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/2d/" rel="tag">2d</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ActiveMQ/" rel="tag">ActiveMQ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CAP/" rel="tag">CAP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C%E8%B0%83%E7%94%A8Java/" rel="tag">C调用Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Demo/" rel="tag">Demo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Dubbo/" rel="tag">Dubbo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Dubbo%E5%8E%9F%E7%90%86/" rel="tag">Dubbo原理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Finagle/" rel="tag">Finagle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Gradle/" rel="tag">Gradle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hessian/" rel="tag">Hessian</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HttpClient/" rel="tag">HttpClient</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JDK/" rel="tag">JDK</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JNI/" rel="tag">JNI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java-%E6%8F%92%E4%BB%B6/" rel="tag">Java 插件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Log4j2/" rel="tag">Log4j2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MQ/" rel="tag">MQ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Maven/" rel="tag">Maven</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mock/" rel="tag">Mock</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mockito/" rel="tag">Mockito</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL%E6%95%B0%E6%8D%AE%E6%81%A2%E5%A4%8D/" rel="tag">MySQL数据恢复</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Proxy/" rel="tag">Proxy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RPC/" rel="tag">RPC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RabbitMQ/" rel="tag">RabbitMQ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RestTemplate/" rel="tag">RestTemplate</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RocketMQ/" rel="tag">RocketMQ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SPI/" rel="tag">SPI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/STS/" rel="tag">STS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SVN/" rel="tag">SVN</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/" rel="tag">Spring</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-Application/" rel="tag">Spring Application</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-Demo/" rel="tag">Spring Demo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-MVC/" rel="tag">Spring MVC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-Mybatis/" rel="tag">Spring Mybatis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-Web/" rel="tag">Spring Web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-Web%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/" rel="tag">Spring Web项目搭建</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-%E4%BE%8B%E5%AD%90/" rel="tag">Spring 例子</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-%E6%A1%86%E6%9E%B6/" rel="tag">Spring 框架</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/" rel="tag">Spring项目搭建</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Sprint-Test/" rel="tag">Sprint Test</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SwitchSharp/" rel="tag">SwitchSharp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tchannel/" rel="tag">Tchannel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Unit-Test/" rel="tag">Unit Test</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VirtualBox/" rel="tag">VirtualBox</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WordPress/" rel="tag">WordPress</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/backpressure/" rel="tag">backpressure</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/container/" rel="tag">container</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dataframe/" rel="tag">dataframe</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/decrypt/" rel="tag">decrypt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/devops/" rel="tag">devops</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/etcd/" rel="tag">etcd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flannel/" rel="tag">flannel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iot/" rel="tag">iot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jetty-run/" rel="tag">jetty:run</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kubectl/" rel="tag">kubectl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kubernetes/" rel="tag">kubernetes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/log/" rel="tag">log</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maven-%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE/" rel="tag">maven 全局配置</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/merge/" rel="tag">merge</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mybatis%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8/" rel="tag">mybatis代码生成器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/performance-optimize/" rel="tag">performance_optimize</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/" rel="tag">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssh%E7%9B%B4%E8%BF%9E/" rel="tag">ssh直连</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/table/" rel="tag">table</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tcp/" rel="tag">tcp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tcpdump/" rel="tag">tcpdump</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/" rel="tag">vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wireshark/" rel="tag">wireshark</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%80%E8%87%B4%E6%80%A7/" rel="tag">一致性</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%8D%E5%90%8C%E7%8E%AF%E5%A2%83%E6%89%93%E5%8C%85/" rel="tag">不同环境打包</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BB%A3%E7%90%86/" rel="tag">代理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BB%A3%E7%A0%81%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86/" rel="tag">代码版本管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95/" rel="tag">免密登录</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/" rel="tag">分布式系统设计</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%9A%E6%A8%A1%E5%9D%97/" rel="tag">多模块</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%9A%E9%85%8D%E7%BD%AE/" rel="tag">多配置</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86/" rel="tag">服务治理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%87%AA%E5%8A%A8%E6%8C%82%E8%BD%BD/" rel="tag">自动挂载</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%98%9F%E5%88%97%E9%80%89%E5%9E%8B/" rel="tag">队列选型</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/ibd/" style="font-size: 10px;">.ibd</a> <a href="/tags/2d/" style="font-size: 15px;">2d</a> <a href="/tags/ActiveMQ/" style="font-size: 10px;">ActiveMQ</a> <a href="/tags/CAP/" style="font-size: 10px;">CAP</a> <a href="/tags/C%E8%B0%83%E7%94%A8Java/" style="font-size: 10px;">C调用Java</a> <a href="/tags/Demo/" style="font-size: 10px;">Demo</a> <a href="/tags/Dubbo/" style="font-size: 15px;">Dubbo</a> <a href="/tags/Dubbo%E5%8E%9F%E7%90%86/" style="font-size: 10px;">Dubbo原理</a> <a href="/tags/Finagle/" style="font-size: 10px;">Finagle</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/Gradle/" style="font-size: 10px;">Gradle</a> <a href="/tags/Hessian/" style="font-size: 10px;">Hessian</a> <a href="/tags/HttpClient/" style="font-size: 10px;">HttpClient</a> <a href="/tags/JDK/" style="font-size: 10px;">JDK</a> <a href="/tags/JNI/" style="font-size: 10px;">JNI</a> <a href="/tags/Java-%E6%8F%92%E4%BB%B6/" style="font-size: 10px;">Java 插件</a> <a href="/tags/Log4j2/" style="font-size: 10px;">Log4j2</a> <a href="/tags/MQ/" style="font-size: 10px;">MQ</a> <a href="/tags/Maven/" style="font-size: 10px;">Maven</a> <a href="/tags/Mock/" style="font-size: 10px;">Mock</a> <a href="/tags/Mockito/" style="font-size: 15px;">Mockito</a> <a href="/tags/MySQL%E6%95%B0%E6%8D%AE%E6%81%A2%E5%A4%8D/" style="font-size: 10px;">MySQL数据恢复</a> <a href="/tags/Proxy/" style="font-size: 15px;">Proxy</a> <a href="/tags/RPC/" style="font-size: 20px;">RPC</a> <a href="/tags/RabbitMQ/" style="font-size: 15px;">RabbitMQ</a> <a href="/tags/RestTemplate/" style="font-size: 10px;">RestTemplate</a> <a href="/tags/RocketMQ/" style="font-size: 10px;">RocketMQ</a> <a href="/tags/SPI/" style="font-size: 10px;">SPI</a> <a href="/tags/STS/" style="font-size: 10px;">STS</a> <a href="/tags/SVN/" style="font-size: 10px;">SVN</a> <a href="/tags/Spring/" style="font-size: 10px;">Spring</a> <a href="/tags/Spring-Application/" style="font-size: 10px;">Spring Application</a> <a href="/tags/Spring-Demo/" style="font-size: 10px;">Spring Demo</a> <a href="/tags/Spring-MVC/" style="font-size: 15px;">Spring MVC</a> <a href="/tags/Spring-Mybatis/" style="font-size: 10px;">Spring Mybatis</a> <a href="/tags/Spring-Web/" style="font-size: 15px;">Spring Web</a> <a href="/tags/Spring-Web%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/" style="font-size: 15px;">Spring Web项目搭建</a> <a href="/tags/Spring-%E4%BE%8B%E5%AD%90/" style="font-size: 10px;">Spring 例子</a> <a href="/tags/Spring-%E6%A1%86%E6%9E%B6/" style="font-size: 15px;">Spring 框架</a> <a href="/tags/Spring%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/" style="font-size: 10px;">Spring项目搭建</a> <a href="/tags/Sprint-Test/" style="font-size: 10px;">Sprint Test</a> <a href="/tags/SwitchSharp/" style="font-size: 10px;">SwitchSharp</a> <a href="/tags/Tchannel/" style="font-size: 10px;">Tchannel</a> <a href="/tags/Unit-Test/" style="font-size: 10px;">Unit Test</a> <a href="/tags/VirtualBox/" style="font-size: 10px;">VirtualBox</a> <a href="/tags/WordPress/" style="font-size: 10px;">WordPress</a> <a href="/tags/backpressure/" style="font-size: 10px;">backpressure</a> <a href="/tags/container/" style="font-size: 10px;">container</a> <a href="/tags/dataframe/" style="font-size: 10px;">dataframe</a> <a href="/tags/decrypt/" style="font-size: 10px;">decrypt</a> <a href="/tags/devops/" style="font-size: 10px;">devops</a> <a href="/tags/docker/" style="font-size: 20px;">docker</a> <a href="/tags/etcd/" style="font-size: 10px;">etcd</a> <a href="/tags/flannel/" style="font-size: 10px;">flannel</a> <a href="/tags/iot/" style="font-size: 10px;">iot</a> <a href="/tags/jetty-run/" style="font-size: 10px;">jetty:run</a> <a href="/tags/kubectl/" style="font-size: 10px;">kubectl</a> <a href="/tags/kubernetes/" style="font-size: 20px;">kubernetes</a> <a href="/tags/log/" style="font-size: 10px;">log</a> <a href="/tags/maven-%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE/" style="font-size: 10px;">maven 全局配置</a> <a href="/tags/merge/" style="font-size: 10px;">merge</a> <a href="/tags/mybatis%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%99%A8/" style="font-size: 10px;">mybatis代码生成器</a> <a href="/tags/performance-optimize/" style="font-size: 10px;">performance_optimize</a> <a href="/tags/python/" style="font-size: 10px;">python</a> <a href="/tags/ssh%E7%9B%B4%E8%BF%9E/" style="font-size: 10px;">ssh直连</a> <a href="/tags/table/" style="font-size: 10px;">table</a> <a href="/tags/tcp/" style="font-size: 10px;">tcp</a> <a href="/tags/tcpdump/" style="font-size: 10px;">tcpdump</a> <a href="/tags/vue/" style="font-size: 10px;">vue</a> <a href="/tags/wireshark/" style="font-size: 10px;">wireshark</a> <a href="/tags/%E4%B8%80%E8%87%B4%E6%80%A7/" style="font-size: 10px;">一致性</a> <a href="/tags/%E4%B8%8D%E5%90%8C%E7%8E%AF%E5%A2%83%E6%89%93%E5%8C%85/" style="font-size: 10px;">不同环境打包</a> <a href="/tags/%E4%BB%A3%E7%90%86/" style="font-size: 10px;">代理</a> <a href="/tags/%E4%BB%A3%E7%A0%81%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86/" style="font-size: 10px;">代码版本管理</a> <a href="/tags/%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95/" style="font-size: 10px;">免密登录</a> <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/" style="font-size: 10px;">分布式系统设计</a> <a href="/tags/%E5%A4%9A%E6%A8%A1%E5%9D%97/" style="font-size: 10px;">多模块</a> <a href="/tags/%E5%A4%9A%E9%85%8D%E7%BD%AE/" style="font-size: 10px;">多配置</a> <a href="/tags/%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86/" style="font-size: 15px;">服务治理</a> <a href="/tags/%E8%87%AA%E5%8A%A8%E6%8C%82%E8%BD%BD/" style="font-size: 10px;">自动挂载</a> <a href="/tags/%E9%98%9F%E5%88%97%E9%80%89%E5%9E%8B/" style="font-size: 10px;">队列选型</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/11/19/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2020/05/29/wordpress/vue-table-styles/">Vue table styles</a>
          </li>
        
          <li>
            <a href="/2020/05/29/wordpress/mockito-invoking-callback/">Mockito invoking callback</a>
          </li>
        
          <li>
            <a href="/2020/01/12/wordpress/package-one-runnable-jar/">Package One Runnable Jar</a>
          </li>
        
          <li>
            <a href="/2019/11/11/wordpress/a-stream-is-just-an-array-in-time/">A stream is just an array in time</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 zman<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>